{% extends "base.html" %}

{% block title %}–ö–∞—Ç–∞–ª–æ–≥ - ShoeStore{% endblock %}

{% block content %}
<h1>–ö–∞—Ç–∞–ª–æ–≥ —Å –æ–±—É–≤–∫–∏</h1>

<div class="card">
    <form method="GET" class="d-flex justify-between align-center flex-wrap gap-2">
        <div style="flex: 1; min-width: 200px;">
            <input type="text" 
                   name="search" 
                   class="form-control" 
                   placeholder="–¢—ä—Ä—Å–µ—Ç–µ –ø–æ –∏–º–µ, —Ü–≤—è—Ç –∏–ª–∏ –æ–ø–∏—Å–∞–Ω–∏–µ..."
                   value="{{ search_term }}">
        </div>
        
        <div class="d-flex gap-2 flex-wrap">
            <select name="sort_by" class="form-select">
                <option value="name" {% if sort_by == 'name' %}selected{% endif %}>–ü–æ –∏–º–µ</option>
                <option value="price" {% if sort_by == 'price' %}selected{% endif %}>–ü–æ —Ü–µ–Ω–∞</option>
                <option value="stock" {% if sort_by == 'stock' %}selected{% endif %}>–ü–æ –Ω–∞–ª–∏—á–Ω–æ—Å—Ç</option>
            </select>
            
            <select name="sort_order" class="form-select">
                <option value="asc" {% if sort_order == 'asc' %}selected{% endif %}>–í—ä–∑—Ö–æ–¥—è—â–æ</option>
                <option value="desc" {% if sort_order == 'desc' %}selected{% endif %}>–ù–∏–∑—Ö–æ–¥—è—â–æ</option>
            </select>
            
            <button type="submit" class="btn">–¢—ä—Ä—Å–∏</button>
            
            {% if search_term %}
                <a href="{{ url_for('catalog.catalog') }}" class="btn btn-danger">–ò–∑—á–∏—Å—Ç–∏</a>
            {% endif %}
        </div>
    </form>
</div>

{% if products %}
    <div class="product-grid">
        {% for product in products %}
            <div class="product-card">
                <div class="product-image">
                    üëü
                </div>
                <div class="product-info">
                    <h3 class="product-name">{{ product.name }}</h3>
                    <p class="product-description">{{ product.description }}</p>
                    
                    <div class="product-details">
                        <div class="product-price">{{ product.price }} –ª–≤.</div>
                        <div class="product-stock {% if product.stock < 5 %}low{% endif %} {% if product.stock == 0 %}out{% endif %}">
                            {% if product.stock > 0 %}
                                –ù–∞–ª–∏—á–Ω–∏: {{ product.stock }}
                            {% else %}
                                –ù–µ –µ –Ω–∞–ª–∏—á–µ–Ω
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="mt-2">
                        <strong>–¶–≤—è—Ç:</strong> {{ product.color }}<br>
                        <strong>–†–∞–∑–º–µ—Ä–∏:</strong> {{ product.sizes|join(', ') }}
                    </div>
                    
                    <a href="{{ url_for('catalog.product_detail', product_id=product.id) }}" 
                       class="btn w-100 mt-2 text-center">
                        –í–∏–∂ –¥–µ—Ç–∞–π–ª–∏
                    </a>
                </div>
            </div>
        {% endfor %}
    </div>
{% else %}
    <div class="card text-center mt-4">
        <h3>–ù—è–º–∞ –Ω–∞–º–µ—Ä–µ–Ω–∏ –ø—Ä–æ–¥—É–∫—Ç–∏</h3>
        <p>–û–ø–∏—Ç–∞–π—Ç–µ —Å –¥—Ä—É–≥–∞ –∫–ª—é—á–æ–≤–∞ –¥—É–º–∞ –∏–ª–∏ –∏–∑—á–∏—Å—Ç–µ—Ç–µ —Ñ–∏–ª—Ç—Ä–∏—Ç–µ.</p>
        <a href="{{ url_for('catalog.catalog') }}" class="btn mt-2">–ò–∑—á–∏—Å—Ç–∏ —Ñ–∏–ª—Ç—Ä–∏</a>
    </div>
{% endif %}
{% endblock %}